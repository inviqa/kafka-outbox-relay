# Configuration

This service exposes several configuration options that are controlled via environment variables. There are several available that can be used to configure how it behaves:

| Environment Variable | Description                                                                                                                                                                                                                                                                                                              |
|----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| SKIP_MIGRATIONS      | Whether to skip executing database migrations on the outbox table. By default, this is false, and should usually be OK for most cases. If you skip migrations then you will be at risk of updates to this relay service not behaving as expected. |
| DB_HOST              | The database host where the outbox table resides.                                                                                                                                                                                                                                                                        |
| DB_PORT              | Database port.                                                                                                                                                                                                                                                                                                           |
| DB_USER              | Database user.                                                                                                                                                                                                                                                                                                           |
| DB_PASS              | Database password.                                                                                                                                                                                                                                                                                                       |
| DB_NAME              | Database name.                                                                                                                                                                                                                                                                                                           |
| DB_DRIVER            | The type of database driver to use, options are either "mysql" or "postgres".                                                                                                                                                                                                                                            |
| KAFKA_HOST           | The Kafka host, should be comma separated when there are multiple Kafka brokers, e.g. "kafka1:9092,kafka2:9092"                                                                                                                                                                                                          |
| TLS_ENABLE           | Whether to enable TLS when communicating with Kafka and the database. We recommend enabling this if your database and Kafka cluster support it. Defaults to false.                                                                                                                                                       |
| TLS_SKIP_VERIFY_PEER | Whether to skip peer verification when connecting over TLS. Defaults to false.                                                                                                                                                                                                                                           |
| WRITE_CONCURRENCY    | The number of concurrent workers used to push data to Kafka. Defaults to 1. You should only need to increase this if the throughput of messages to the outbox is extremely high.                                                                                                                                         |
| POLL_FREQUENCY_MS    | How frequently, in milliseconds, to poll the outbox table for new messages. Defaults to 500.                                                                                                                                                                                                                             |
| BATCH_SIZE           | The maximum number of messages to grab from the outbox table for each poll operation. Defaults to 250.                                                                                                                                                                                                                   |
